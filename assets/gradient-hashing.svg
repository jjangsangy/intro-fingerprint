<svg width="800" height="400" viewBox="0 0 800 400" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#a29bfe;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#6c5ce7;stop-opacity:1" />
    </linearGradient>
    <style>
      .label { font-family: 'Segoe UI', Helvetica, Arial, sans-serif; font-size: 14px; fill: #b2bec3; }
      .label-sm { font-family: 'Segoe UI', Helvetica, Arial, sans-serif; font-size: 12px; fill: #636e72; }
      .title { font-family: 'Segoe UI', Helvetica, Arial, sans-serif; font-size: 18px; font-weight: bold; fill: white; }
      .value { font-family: 'Consolas', monospace; font-size: 14px; fill: white; font-weight: bold; }
      .bit-one { fill: #00b894; font-weight: bold; }
      .bit-zero { fill: #ff7675; font-weight: bold; }
      .highlight { stroke: #fab1a0; stroke-width: 2; fill: none; }
      .arrow { stroke: #636e72; stroke-width: 2; fill: none; }
      .box { fill: #1e272e; stroke: #6c5ce7; stroke-width: 1; }
      .pixel { stroke: #2d3436; stroke-width: 1; }
      .freq-low { fill: #6c5ce7; fill-opacity: 0.6; }
    </style>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <path d="M0,0 L0,6 L9,3 z" fill="#636e72" />
    </marker>
  </defs>

  <rect width="800" height="400" fill="#121212" rx="10"/>

  <text x="400" y="40" text-anchor="middle" class="title">PDQ Hash Video Fingerprinting</text>

  <!-- 1. Preprocessing -->
  <g transform="translate(40, 80)">
    <text x="75" y="-10" text-anchor="middle" class="label" style="fill: white;">1. Preprocessing</text>

    <rect x="25" y="10" width="100" height="40" rx="2" fill="#2d3436" stroke="#b2bec3" stroke-width="1" stroke-dasharray="4"/>
    <text x="75" y="35" text-anchor="middle" class="label-sm">Video Frame</text>

    <path d="M75 55 L75 80" class="arrow" marker-end="url(#arrow)"/>
    <text x="75" y="93" text-anchor="middle" class="label-sm">512x512 Luma</text>

    <g transform="translate(0, 25)">
      <rect x="25" y="75" width="100" height="30" rx="4" fill="#1e272e" stroke="#ffe600" stroke-width="0.8"/>
      <text x="75" y="93" text-anchor="middle" class="label-sm">Jarosz Filter</text>
    </g>

    <path d="M75 135 L75 170" class="arrow" marker-end="url(#arrow)"/>

    <g transform="translate(35, 175)">
        <rect x="0" y="0" width="80" height="80" fill="#1e272e" stroke="#a29bfe" stroke-width="1"/>
        <!-- Draw a finer grid to imply 64x64 -->
        <path d="M5 0 v80 M10 0 v80 M15 0 v80 M20 0 v80 M25 0 v80 M30 0 v80 M35 0 v80 M40 0 v80 M45 0 v80 M50 0 v80 M55 0 v80 M60 0 v80 M65 0 v80 M70 0 v80 M75 0 v80" stroke="#2d3436" stroke-width="0.3"/>
        <path d="M0 5 h80 M0 10 h80 M0 15 h80 M0 20 h80 M0 25 h80 M0 30 h80 M0 35 h80 M0 40 h80 M0 45 h80 M0 50 h80 M0 55 h80 M0 60 h80 M0 65 h80 M0 70 h80 M0 75 h80" stroke="#2d3436" stroke-width="0.3"/>
        <text x="42" y="100" text-anchor="middle" class="label-sm">64x64 Grayscale</text>
    </g>
  </g>

  <path d="M165 300 L250 200" class="arrow" marker-end="url(#arrow)"/>

  <!-- 2. DCT Projection and Hash -->
  <g transform="translate(250, 80)">
    <text x="130" y="-10" text-anchor="middle" class="label" style="fill: white;">2. DCT Projection &amp; Hash</text>

    <!-- DCT visualization -->
    <g transform="translate(10, 30)">
        <rect x="0" y="0" width="80" height="80" fill="#1e272e" stroke="#6c5ce7" stroke-width="1"/>
        <!-- Represent projection -->
        <text x="40" y="45" text-anchor="middle" class="label-sm" fill="#a29bfe">D &#215; Img &#215; D&#7488;</text>
        <text x="40" y="95" text-anchor="middle" class="label-sm">Projection</text>
        <text x="40" y="110" text-anchor="middle" class="label-sm">Matrix</text>
    </g>

    <path d="M30 40 Q85 20 140 60" class="arrow" marker-end="url(#arrow)"/>

    <!-- 16x16 coefficients -->
    <g transform="translate(140, 40)">
        <text x="40" y="-30" text-anchor="middle" class="label-sm">16x16 Coefficients</text>
        <text x="40" y="-15" text-anchor="middle" class="label-sm">(256 values)</text>
        <rect x="0" y="0" width="80" height="80" fill="#2d3436" stroke="#b2bec3"/>
        <!-- 4x4 grid representing blocks of 4x4 pixels each to show 16x16 total? Or just a grid -->
        <path d="M20 0 v80 M40 0 v80 M60 0 v80 M0 20 h80 M0 40 h80 M0 60 h80" stroke="#1e272e" stroke-width="1"/>
        <path d="M5 0 v80 M10 0 v80 M15 0 v80 M25 0 v80 M30 0 v80 M35 0 v80 M45 0 v80 M50 0 v80 M55 0 v80 M65 0 v80 M70 0 v80 M75 0 v80" stroke="#1e272e" stroke-width="0.3"/>
        <path d="M0 5 h80 M0 10 h80 M0 15 h80 M0 25 h80 M0 30 h80 M0 35 h80 M0 45 h80 M0 50 h80 M0 55 h80 M0 65 h80 M0 70 h80 M0 75 h80" stroke="#1e272e" stroke-width="0.3"/>
    </g>

    <g transform="translate(10, 180)">
        <rect x="0" y="0" width="260" height="80" rx="4" fill="#1e272e" stroke="#636e72" stroke-width="1" stroke-dasharray="2"/>
        <text x="130" y="25" text-anchor="middle" class="label" fill="#a29bfe">Logic: Coeff > Median ? 1 : 0</text>

        <g transform="translate(50, 50)">
            <text x="0" y="0" text-anchor="middle" class="value bit-one">1</text>
            <text x="20" y="0" text-anchor="middle" class="value bit-zero">0</text>
            <text x="40" y="0" text-anchor="middle" class="value bit-one">1</text>
            <text x="60" y="0" text-anchor="middle" class="value bit-one">1</text>
            <text x="80" y="0" text-anchor="middle" class="value bit-zero">0</text>
            <text x="100" y="0" text-anchor="middle" class="value bit-zero">0</text>
            <text x="120" y="0" text-anchor="middle" class="value bit-one">1</text>
            <text x="140" y="0" text-anchor="middle" class="value" fill="#636e72">...</text>
        </g>
        <text x="130" y="70" text-anchor="middle" class="label-sm">Result: 256 bits (32 bytes)</text>
    </g>
  </g>

  <path transform="translate(0, 50)" d="M480 130 L560 130" class="arrow" marker-end="url(#arrow)"/>

  <!-- 3. Match -->
  <g transform="translate(570, 80)">
    <text x="75" y="-10" text-anchor="middle" class="label" style="fill: white;">3. Match (Hamming Dist)</text>

    <text x="0" y="30" class="label-sm" fill="#b2bec3">Stored Hash (256-bit)</text>
    <g transform="translate(0, 40)">
        <text x="0" y="14" class="value" fill="#a29bfe" letter-spacing="2">1011001...</text>
    </g>

    <text x="0" y="80" class="label-sm" fill="#b2bec3">Current Frame Hash</text>
    <g transform="translate(0, 90)">
        <text x="0" y="14" class="value" fill="#b2bec3" letter-spacing="2">10</text>
        <text x="19" y="14" class="value" fill="#ff7675" letter-spacing="2">1</text>
        <text x="28" y="14" class="value" fill="#b2bec3" letter-spacing="2">1001...</text>
    </g>

    <line x1="0" y1="125" x2="180" y2="125" stroke="#636e72" stroke-width="1"/>

    <text x="0" y="150" class="label-sm" fill="#b2bec3">Hamming Distance (Diffs)</text>
    <text x="0" y="175" class="value" fill="#ff7675" font-size="20">1</text>
    <text x="15" y="175" class="label-sm" fill="#b2bec3">(e.g. Threshold &#8804; 50)</text>

    <g transform="translate(-5, 215)">
        <circle cx="15" cy="15" r="15" fill="#00b894" fill-opacity="0.2" stroke="#00b894" stroke-width="2"/>
        <text x="40" y="20" class="title" fill="#00b894">MATCH FOUND</text>
    </g>
  </g>

</svg>
