<svg width="800" height="400" viewBox="0 0 800 400" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#a29bfe;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#6c5ce7;stop-opacity:1" />
    </linearGradient>
    <style>
      .label { font-family: 'Segoe UI', Helvetica, Arial, sans-serif; font-size: 14px; fill: #b2bec3; }
      .label-sm { font-family: 'Segoe UI', Helvetica, Arial, sans-serif; font-size: 12px; fill: #636e72; }
      .title { font-family: 'Segoe UI', Helvetica, Arial, sans-serif; font-size: 18px; font-weight: bold; fill: white; }
      .value { font-family: 'Consolas', monospace; font-size: 14px; fill: white; font-weight: bold; }
      .bit-one { fill: #00b894; font-weight: bold; }
      .bit-zero { fill: #ff7675; font-weight: bold; }
      .highlight { stroke: #fab1a0; stroke-width: 2; fill: none; }
      .arrow { stroke: #636e72; stroke-width: 2; fill: none; }
      .box { fill: #1e272e; stroke: #6c5ce7; stroke-width: 1; }
      .pixel { stroke: #2d3436; stroke-width: 1; }
      .freq-low { fill: #6c5ce7; fill-opacity: 0.6; }
    </style>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <path d="M0,0 L0,6 L9,3 z" fill="#636e72" />
    </marker>
  </defs>

  <rect width="800" height="400" fill="#121212" rx="10"/>

  <text x="400" y="40" text-anchor="middle" class="title">Perceptual Hashing (pHash) Video Fingerprinting</text>

  <!-- 1. Resize -->
  <g transform="translate(50, 80)">
    <text x="75" y="-10" text-anchor="middle" class="label" style="fill: white;">1. Resize &amp; Grayscale</text>
    
    <rect x="25" y="20" width="100" height="60" rx="2" fill="#2d3436" stroke="#b2bec3" stroke-width="1" stroke-dasharray="4"/>
    <text x="75" y="55" text-anchor="middle" class="label-sm">Video Frame</text>

    <path d="M75 90 L75 120" class="arrow" marker-end="url(#arrow)"/>

    <g transform="translate(35, 130)">
        <rect x="0" y="0" width="80" height="80" fill="#1e272e" stroke="#a29bfe" stroke-width="1"/>
        <path d="M10 0 v80 M20 0 v80 M30 0 v80 M40 0 v80 M50 0 v80 M60 0 v80 M70 0 v80" stroke="#2d3436" stroke-width="0.5"/>
        <path d="M0 10 h80 M0 20 h80 M0 30 h80 M0 40 h80 M0 50 h80 M0 60 h80 M0 70 h80" stroke="#2d3436" stroke-width="0.5"/>
    </g>
    <text x="75" y="230" text-anchor="middle" class="label-sm">32x32 Grayscale</text>
  </g>

  <path d="M165 250 L260 150" class="arrow" marker-end="url(#arrow)"/>

  <!-- 2. DCT and Hash -->
  <g transform="translate(260, 80)">
    <text x="120" y="-10" text-anchor="middle" class="label" style="fill: white;">2. DCT & Hash Generation</text>

    <!-- DCT visualization -->
    <g transform="translate(0, 30)">
        <rect x="0" y="0" width="80" height="80" fill="#1e272e" stroke="#6c5ce7" stroke-width="1"/>
        <rect x="0" y="0" width="20" height="20" class="freq-low"/>
        <text x="40" y="95" text-anchor="middle" class="label-sm">2D-DCT</text>
        <text x="40" y="112" text-anchor="middle" class="label-sm">Top-left 8x8</text>
        <text x="40" y="126" text-anchor="middle" class="label-sm">(Low Freqs)</text>
    </g>

    <path d="M20 40 Q75 20 130 60" class="arrow" marker-end="url(#arrow)"/>

    <!-- Reduced 8x8 coefficients -->
    <g transform="translate(130, 40)">
        <text x="20" y="-30" text-anchor="middle" class="label-sm">Mean Calculation</text>
        <text x="20" y="-15" text-anchor="middle" class="label-sm">Avg: -12.4</text>
        <rect x="0" y="0" width="40" height="40" fill="#2d3436" stroke="#b2bec3"/>
        <path d="M10 0 v40 M20 0 v40 M30 0 v40 M0 10 h40 M0 20 h40 M0 30 h40" stroke="#1e272e" stroke-width="0.5"/>
    </g>

    <g transform="translate(0, 180)">
        <rect x="0" y="0" width="240" height="80" rx="4" fill="#1e272e" stroke="#636e72" stroke-width="1" stroke-dasharray="2"/>
        <text x="120" y="25" text-anchor="middle" class="label" fill="#a29bfe">Logic: Coeff &gt; Mean ? 1 : 0</text>
        
        <g transform="translate(40, 50)">
            <text x="0" y="0" text-anchor="middle" class="value bit-one">1</text>
            <text x="20" y="0" text-anchor="middle" class="value bit-zero">0</text>
            <text x="40" y="0" text-anchor="middle" class="value bit-one">1</text>
            <text x="60" y="0" text-anchor="middle" class="value bit-one">1</text>
            <text x="80" y="0" text-anchor="middle" class="value bit-zero">0</text>
            <text x="100" y="0" text-anchor="middle" class="value bit-zero">0</text>
            <text x="120" y="0" text-anchor="middle" class="value bit-one">1</text>
            <text x="140" y="0" text-anchor="middle" class="value" fill="#636e72">...</text>
        </g>
        <text x="120" y="70" text-anchor="middle" class="label-sm">Result: 64 bits (8 bytes)</text>
    </g>
  </g>

  <path d="M430 140 L550 134" class="arrow" marker-end="url(#arrow)"/>

  <!-- 3. Match -->
  <g transform="translate(560, 80)">
    <text x="100" y="-10" text-anchor="middle" class="label" style="fill: white;">3. Match (Hamming Dist)</text>

    <text x="0" y="30" class="label-sm" fill="#b2bec3">Stored Hash (64-bit)</text>
    <g transform="translate(0, 40)">
        <text x="0" y="14" class="value" fill="#a29bfe" letter-spacing="2">1011001...</text>
    </g>

    <text x="0" y="80" class="label-sm" fill="#b2bec3">Current Frame Hash</text>
    <g transform="translate(0, 90)">
        <text x="0" y="14" class="value" fill="#b2bec3" letter-spacing="2">10</text>
        <text x="19" y="14" class="value" fill="#ff7675" letter-spacing="2">1</text>
        <text x="28" y="14" class="value" fill="#b2bec3" letter-spacing="2">1001...</text>
    </g>

    <line x1="0" y1="115" x2="150" y2="115" stroke="#636e72" stroke-width="1"/>
    
    <text x="0" y="140" class="label-sm" fill="#b2bec3">Hamming Distance (Diffs)</text>
    <text x="0" y="165" class="value" fill="#ff7675" font-size="20">1</text>
    <text x="20" y="165" class="label-sm" fill="#b2bec3">(Match if &lt;= 12)</text>

    <g transform="translate(0, 190)">
        <circle cx="15" cy="15" r="15" fill="#00b894" fill-opacity="0.2" stroke="#00b894" stroke-width="2"/>
        <text x="40" y="20" class="title" fill="#00b894">MATCH FOUND</text>
     </g>
  </g>

</svg>
